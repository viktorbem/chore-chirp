{% from 'macros/task-card.jinja2' import task_card %}

{% macro group_card(group) %}

    <div class="col" draggable="true">
        <div class="card card-task-group mb-4 rounded-3 shadow-sm h-100" data-group-id="{{ group.id }}">
            <div class="card-header py-3">
                <h4 class="task-group-title my-0 fw-normal d-flex justify-content-between align-items-center">
                    <span>{{ group.title }}</span>
                    <div>
                        <a href="#" class="link-edit-group-name link-secondary" title="Edit title">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        {% if group.task_objects|length == 0 %}
                            <a href="{{ url_for('groups.remove_group', group_id=group.id) }}"
                               class="link-remove-group link-secondary" title="Remove group">
                                <i class="bi bi-trash"></i>
                            </a>
                        {% endif %}
                    </div>
                </h4>
                <form class="task-group-form d-none justify-content-between align-items-center">
                    <input class='form-control' type="text" id='title-{{ group.id }}'
                           placeholder='Group title' value="{{ group.title }}">
                </form>
            </div>
            <div class="card-body card-task-container text-start">

                {% for task in group.task_objects %}
                    {{ task_card(task) }}
                {% endfor %}

            </div>
            <div class="px-3 pb-3">
                <a href="{{ url_for('tasks.add_task', group_id=group.id) }}"
                   class="w-100 btn btn-lg btn-outline-secondary">Add task</a>
            </div>
        </div>
    </div>

{% endmacro %}