<!doctype html>

{% if current_user.is_authenticated %}
    {% set theme = current_user.theme %}
{% endif %}

<html lang="en" data-bs-theme="{{ theme }}">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
          crossorigin="anonymous">

    <!-- Bootstrap Icons CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

    <!-- VueJS scripts -->
    <!-- TODO: Perhaps this could be a part of the javascript build one day -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- SimpleMDE https://simplemde.com/ -->
    <!-- TODO: Look for some other options, that could be handled from flask -->
    <link href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

    <!-- Custom CSS override -->
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/pygments.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/simplemde-dark.css') }}" rel="stylesheet">

    <!-- JS variables used in custom scripts -->
    <script>
        const App = {
            endpoints: {
                addComment: "{{ url_for('comments.add_comment') }}",
                editComment: "{{ url_for('comments.edit_comment') }}",
                getComments: "{{ url_for('comments.get_comments') }}",
                updateChores: "{{ url_for('chores.update_chores') }}",
                updateComments: "{{ url_for('comments.update_comments') }}",
                updateGroups: "{{ url_for('groups.update_groups') }}",
                updateUser: "{{ url_for('user.update_user') }}",
            },
            flashMessages: [{% include 'snippets/flash-messages.j2' %}],
            userId: "{{ current_user.id }}",
        };
    </script>

    {% block head %}{% endblock %}
</head>

<body>
    {% include 'sections/navbar.j2' %}

    <main class="container container-fluid mt-4">
        {% block body %}{% endblock %}
    </main>

    <div id="toast-container" class="toast-container bottom-0 end-0 py-4 px-3"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>

    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>